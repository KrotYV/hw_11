{% extends 'main.html' %}

{% block title %}List of authors{% endblock %}

{% block content %}
    <p><a href="{% url 'index' %}">Return to home page</a></p>
        <div>
            <p>Average rating of all the books we have written by authors: {{ avg_rating }}</p>
            <h1>List of authors:</h1>
        </div>
        <table>
            <caption><h2>Authors</h2></caption>
            <tr>
                <th>Name</th>
                <th>Age</th>
                <th>Books</th>
            </tr>
            {% for author in authors %}
                    <td><a href="{% url 'authors_detail' pk=author.pk %}">{{ author.name }}</a></td>
                    <td>{{ author.age }}</td>
                    <td>{{ author.book_set.all|length }} </td>
                </tr>
            {% endfor %}
        </table>
{% endblock %}